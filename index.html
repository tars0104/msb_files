<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Million Scholar Baby</title>
    <script>
        async function fetchRecommendations() {
            const university = document.getElementById('university').value;
            const studentLoan = document.getElementById('studentLoan').value;
            const country = document.getElementById('country').value;
            const federalGrantsInterest = document.getElementById('federalGrantsInterest').checked;
            const major = document.getElementById('major').value;
            const passiveIncomeInterest = document.getElementById('passiveIncomeInterest').checked;

            const url = new URL('https://msb01-7a42ba9d8940.herokuapp.com/get-recommendations');
            url.searchParams.append('university', university);
            url.searchParams.append('studentLoan', studentLoan);
            url.searchParams.append('country', country);
            url.searchParams.append('federalGrantsInterest', federalGrantsInterest);
            url.searchParams.append('major', major);
            url.searchParams.append('passiveIncomeInterest', passiveIncomeInterest);

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                const data = await response.json();
                document.getElementById('recommendations').textContent = data.recommendations;
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('recommendations').textContent = 'Failed to fetch recommendations.';
            }
        }

        async function submitFeedback() {
            const feedbackHelpful = document.getElementById('feedbackHelpful').checked;
            const comments = document.getElementById('comments').value;

            const url = new URL('https://msb01-7a42ba9d8940.herokuapp.com/submit-feedback');
            url.searchParams.append('feedbackHelpful', feedbackHelpful);
            url.searchParams.append('comments', comments);

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error('Network response was not ok ' + response.statusText);
                }
                const data = await response.json();
                document.getElementById('feedbackMessage').textContent = data.message;
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('feedbackMessage').textContent = 'Failed to submit feedback.';
            }
        }
    </script>
</head>
<body>
    <h1>Get Recommendations</h1>
    <form onsubmit="event.preventDefault(); fetchRecommendations();">
        <label for="university">University:</label>
        <input type="text" id="university" name="university" required><br><br>
        <label for="studentLoan">Student Loan:</label>
        <input type="number" id="studentLoan" name="studentLoan" required><br><br>
        <label for="country">Country:</label>
        <input type="text" id="country" name="country" required><br><br>
        <label for="federalGrantsInterest">Interested in Federal Grants:</label>
        <input type="checkbox" id="federalGrantsInterest" name="federalGrantsInterest"><br><br>
        <label for="major">Major:</label>
        <input type="text" id="major" name="major" required><br><br>
        <label for="passiveIncomeInterest">Interested in Passive Income:</label>
        <input type="checkbox" id="passiveIncomeInterest" name="passiveIncomeInterest"><br><br>
        <button type="submit">Get Recommendations</button>
    </form>
    <h2>Recommendations</h2>
    <p id="recommendations"></p>

    <h1>Submit Feedback</h1>
    <form onsubmit="event.preventDefault(); submitFeedback();">
        <label for="feedbackHelpful">Was the feedback helpful?</label>
        <input type="checkbox" id="feedbackHelpful" name="feedbackHelpful"><br><br>
        <label for="comments">Comments:</label>
        <textarea id="comments" name="comments" required></textarea><br><br>
        <button type="submit">Submit Feedback</button>
    </form>
    <h2>Feedback Response</h2>
    <p id="feedbackMessage"></p>
</body>
</html>
